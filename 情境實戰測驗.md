# 情境實戰測驗

## 題目一
試想臨時有一活動網頁專案將於近日推出，預期推廣期間訪客流量會是平日常態之百倍（或更多）請簡易描述你/妳將如何確保服務能在推廣期間正常運作？考量的細節是什麼？

### 答:
我會為 service 或機器配置自動擴展，或者會去參考公司在過往特殊活動/節日的流量，先行加開資源/機器。  
然後活動以前，先確保當前架構，舉例檢查 CloudFront 的配置是否正確，架構是否符合跨區域/錯誤移轉/高可用性，  
各種使用到的 service 是否符合最佳實踐，確認當前運作一切正常。  
(以及配合開發團隊的功能測試、壓力測試等等)  
接著就是監控/告警的設置，還有正式上線時是否多安排人力監控，協助緊急應變。

---

## 題目二
試想有一個 API 伺服器集群，背後由多台機器組成，此時服務監控系統發現其中一台回應時間經常逾時，僅有此機器異常，請簡易描述你/妳將會如何進行問題排查？考量的細節是什麼？

### 答:
我會優先檢查此台機器的資源使用情況 (CPU, memory 等等)，優先排除資源的使用瓶頸。  
接著檢查網路是否異常 (重新檢查一次網路的配置，網路連線狀況等)。  
然後看該 node 的 log 在對應時間點的 message。  
最後再評估考慮重啟。

---

## 題目三
試想有一項目運行於 AWS EC2 機器之上，已確認該服務仍然正常運行中，但由於不明原因導致無法再次透過 SSH 登入確認狀態（已確認排除並非網路異常，亦非防火牆阻擋所導致）。  
請簡易描述你/妳將如何排查問題，並且讓服務恢復正常運作？考量的細節是什麼？如果可以，請試著回答造成無法登入的可能的肇因為何？

### 答:
我會先了解有哪些可能原因造成當前的問題或 error，再逐一按照當前的條件去排除可能性並進行排錯。  
無法 SSH 並且考量已確認並非網路異常，亦非防火牆阻擋所導致，我會優先試想 disk 空間是否不夠導致無法寫入金鑰，  
透過監控指標查看 disk 使用率，若是這方面的原因我會通知團隊並討論與安排提升 disk 規格。  
若非前述，我會試想需要檢查 ssh daemon 或 metadata。  
但因為檢查這些需要進到機器裡，我會先試試 EC2 主控台裡的 EC2 Instance Connect 網頁版的連線 (GCP 我會試試 serial port connection)。  
(個人經驗中，還要再去詢問與這台機器/專案相關的各 RD，有些資深同事有機會過往有設定過自己的 key，總之就是在需要到重啟機器這步驟以前，先嘗試問人)。  
根據前述情境，最後我會考慮金鑰需要修復的情況，會先查詢雲服務修復金鑰的各種方式，選擇合適條件的。  
舉例考慮 AWS Systems Manager 的 AWSSupport-ResetAccess (GCP 的修復 SSH 金鑰功能...) 等等。

---

## 題目四
試想已有一組 ELK/EFK 日誌服務集群，而今日有一新服務上線並且串接日誌紀錄，讓開發者能夠透過 Kibana 進行線上錯誤排查，你/妳會如何將日誌檔內容串接至 ELK/EFK 系統？考量的細節是什麼？

### 答:
個人僅有維運 AWS S3 -> Logstash -> AWS OpenSearch -> OpenSearch 的 Dashboard (Kibana) 的經驗。  
此串接過程中需確保 Logstash 的訪問以及 config 的正確配置，再來是根據日誌格式需求設置 OpenSearch 索引模板，mapping 的規則。  
接著在 Dashboard (Kibana) 創建 `logstash-logs-*` 索引用來在 Dashboard 中查詢和使用可視化工具。
